
{% extends 'restaurant/base.html'%}

{% block content %}


{% if u != 'Guest'%}

<div class="container">
    <div class="row">
        <div class="col-md-2">
            <img src="http://i.imgur.com/VTwHzHA.png" height="" width="" class="img-thumbnail">
        </div>
        <div class="col-md-10">
            
            <nav class="navbar navbar-default inverse"> <!--class="navbar navbar-inverse navbar-fixed-top" role="navigation">-->
    
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                </div>
               
                <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/recomet/">Home</a></li>
                    <li><a href="/recomet/recomtest/">Recommendations</a></li>
                    <li><a href="/recomet/user/profile/{{ u.id }}/">My Profile</a></li>
                    <li><a href="/recomet/usercontext/{{u.id}}/">My Context</a></li>
                    <li><a href="/recomet/wishlist/{{u.id}}/">My Wishlist</a></li>
                    <li><a href="/recomet/topten/">Community</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                  <li><a href="/accounts/logout/"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                </ul>
                </div>
            </div>
            </nav>
        </div>
    </div>
</div>
    
{% else %}
<div class="container">
    <div class="row">
        <div class="col-md-2">
            <img src="http://i.imgur.com/VTwHzHA.png" height="" width="" class="img-thumbnail">
        </div>
        <div class="col-md-10"> 
            <nav class="navbar navbar-default inverse"> <!--class="navbar navbar-inverse navbar-fixed-top" role="navigation">-->
   
           <div class="container-fluid">
               <!-- Brand and toggle get grouped for better mobile display -->
               <div class="navbar-header">
                   <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                   </button>
                </div>
               
               <div class="collapse navbar-collapse" id="myNavbar">
               <ul class="nav navbar-nav">
                   <li class="active"><a href="/recomet/">Home</a></li>
                   <li><a href="/recomet/guest/">Recommendations</a></li>
                   <li><a href="/accounts/register">Register</a></li>
               </ul>
               <ul class="nav navbar-nav navbar-right">
                 <li><a href="/accounts/login"><span class="glyphicon glyphicon-log-in"></span> Login </a></li>
               </ul>
               </div>
           </div>
       </nav>
        </div>   
    </div>
</div>

{% endif %}
    
{% if not rat %}
    <div>
            <b class="small pull-right"><img  width="20" height="20" src="http://i.imgur.com/QCOoOv4.png" />
            <font color="red"> You didn't add any rating. Please vote to get recommendations. </font></b>
    </div>
{% endif %}
<br>
<div class="container">
    {% if u != 'Guest'%}
       <center> <p class="small">Login as <b>{{ u }}.</b>
       
       {% if u.price %}
       <div class="col-md-3">
        <div class="thumbnail">
            <p class="small">Your favorite price is <b>{{u.price}}</b></p>
        </div>
        </div>
       
       {% endif %}
       
       {% if u.cuisine.all %}
       <div class="col-md-3">
        <div class="thumbnail">
            <p class="small">Your favorite food <br>
            <b>
             {% for c in u.cuisine.all%}
                 &nbsp;[{{ c.cuisine }}] 
             {% endfor %}
            </b>
            </p>
        </div>
        </div>
       {% endif %}
       
       {% if u.atribute.all %}
        <div class="col-md-3">
        <div class="thumbnail">
            <p class="small">What do you like? <br>
            <b>
             {% for a in u.atribute.all%}
                 &nbsp;[{{ a.atribute }}] 
             {% endfor %}
            </b>
            </p>
        </div>
        </div>
       {% endif %}
        </p>
       </center>
    {% endif %}
</div>

<div>
<!--AGREGAMOS LA LISTA DE RESTAURANTES-->
<form role="form" action="" method="POST">{% csrf_token %}
<!-- Split button dropdowns menus -->
<b class="header">Search Restaurants by: </b>&nbsp; 

            <!--div class="btn-group">
                <button class="btn btn-default dropdown-toggle" type="button" id="menu1" data-toggle="dropdown">
                   Price
                <span class="caret"></span></button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="menu1" id="btnmenu1" data-toggle="dropdown">
                    <li role="presentation" data="1"><a role="item" value="1"  href="#">Cheap $</a></li>
                    <li role="presentation" data="2"><a role="item" value="1"  href="#">Regular $$</a></li>
                    <li role="presentation" data="3"><a role="item" value="1"  href="#">Expensive $$$</a></li>
                    <li role="presentation" data="4"><a role="item" value="1"  href="#">Too expensive $$$$</a></li>
                </ul>
            </div>
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu" data-toggle="dropdown">
                    Instalations
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu2" id="btnmenu2">
                    <li role="presentation"><a role="item" value="2" href="#">Garden</a></li>
                    <li role="presentation"><a role="item" value="2" href="#">Terrace</a></li>
                    <li role="presentation"><a role="item" value="2" href="#">Indoor</a></li>
                    <li role="presentation"><a role="item" value="2" href="#">Outdoor</a></li>
                  </ul>
            </div>
    
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu3" data-toggle="dropdown">
                    Parking
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu3" id="btnmenu3">
                    <li role="presentation"><a role="item" value="3" href="#">No parking</a></li>
                    <li role="presentation"><a role="item" value="3" href="#">Free parking</a></li>
                    <li role="presentation"><a role="item" value="3" href="#">Valet parking</a></li>
                  </ul>
            </div>
    
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu4" data-toggle="dropdown">
                  Atmosphere
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu4" id="btnmenu4">
                    <li role="presentation"><a role="item" value="4" href="#">Relax</a></li>
                    <li role="presentation"><a role="item" value="4" href="#">Familiar</a></li>
                    <li role="presentation"><a role="item" value="4" href="#">Friends</a></li>
                    <li role="presentation"><a role="item" value="4" href="#">Bussines</a></li>
                    <li role="presentation"><a role="item" value="4" href="#">Romantic</a></li>
                  </ul>
            </div>
    
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu5" data-toggle="dropdown">
                  Payment
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu5" id="btnmenu5">
                    <li role="presentation"><a role="item" value="5" href="#">Credit/Debit card</a></li>
                    <li role="presentation"><a role="item" value="5" href="#">Cash</a></li>
                  </ul>
            </div>
        
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu6" data-toggle="dropdown">
                  Dresscode
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu6" id="btnmenu6">
                    <li role="presentation"><a role="item" value="6" href="#">Casual</a></li>
                    <li role="presentation"><a role="item" value="6" href="#">Informal</a></li>
                    <li role="presentation"><a role="item" value="6" href="#">Formal</a></li>
                  </ul>
            </div>
        
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu7" data-toggle="dropdown">
                  Alcohol
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu7" id="btnmenu7">
                    <li role="presentation"><a role="item" value="7" href="#">No alcohol</a></li>
                    <li role="presentation"><a role="item" value="7" href="#">Wine-beer</a></li>
                  </ul>
            </div>
            
            <div class="btn-group">
                  <button class="btn btn-default dropdown-toggle" type="button" id="menu8" data-toggle="dropdown">
                  Cuisine
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="menu8" id="btnmenu8">
                    <li role="presentation"><a role="item" value="8" href="#">Japanese</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Chinese</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Italian</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Argentinean</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Cantonese</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Mandarin</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Mongolian</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Arabic</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Greek</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Spanish</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Brasilian</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Swiss</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Szechuan</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Asian</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">International</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Steak Grill</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Vegetarian</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Natural/Healty/Light</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Traditional Mexican</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Tacos</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Mediterranean</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Middle Eastern</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">American/Fast Food</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Gourmet</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Pizza</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Bar/Beer</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Tapas Cafe/Bar</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">French</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Birds</a></li>
                    <li role="presentation"><a role="item" value="8" href="#">Seafood</a></li>
                  </ul>
            </div>
</form>
</div-->

<!--div>

    
    <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
        <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
    </form>
</div-->

<div id="tags"> </div>

<hr>

<div class="container menu">
    <div class="row">
        <div class="col-sm-2 col-md-3">
           
            <div class="panel-group" id="accordion">
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" >
                            </span>Price</a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse">
                       <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="1" href="#">Cheap $</span></a></td></tr>
                                <tr><td><a value="1" href="#">Regular $$</a></td></tr>
                                <tr><td><a value="1" href="#">Expensive $$$</a></td></tr>
                                <tr><td><a value="1" href="#">Too expensive $$$$</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            </span>Instalations</a>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td> <a value="2" href="#">Indoor</a></td></tr>
                                <tr><td> <a value="2" href="#">Outdoor</a> </td></tr>
                                <tr><td> <a value="2" href="#">Terrace</a></td></tr>
                                <tr><td> <a value="2" href="#">Garden</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            </span>Parking</a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="3" href="#">No parking</a></td></tr>
                                <tr><td><a value="3" href="#">Free parking</a> </td></tr>
                                <tr><td><a value="3" href="#">Valet parking</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                            </span>Atmosphere</a>
                        </h4>
                    </div>
                    <div id="collapseFour" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="4" href="#">Relax</a></td></tr>
                                <tr><td><a value="4" href="#">Familiar</a> </td></tr>
                                <tr><td><a value="4" href="#">Friends</a></td></tr>
                                <tr><td><a value="4" href="#">Bussines</a></td></tr>
                                <tr><td><a value="4" href="#">Romantic</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                 <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
                            </span>Payment</a>
                        </h4>
                    </div>
                    <div id="collapseFive" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td> <a value="5" href="#">Credit/Debit card</a></td></tr>
                                <tr><td> <a value="5"href="#">Cash</a> </td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                
                 <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix">
                            </span>Dresscode</a>
                        </h4>
                    </div>
                    <div id="collapseSix" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="6" href="#">Casual</a></td></tr>
                                <tr><td><a value="6" href="#">Informal</a> </td></tr>
                                <tr><td><a value="6" href="#">Formal</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                 
                 <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseSeven">
                            </span>Alcohol</a>
                        </h4>
                    </div>
                    
                    <div id="collapseSeven" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="7" href="#">No alcohol</a></td></tr>
                                <tr><td><a value="7" href="#">Wine-beer</a> </td></tr>
                            </table>
                        </div>
                    </div>
                    
                </div>
                 
                 
                 <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseEight">
                            </span>Cuisine</a>
                        </h4>
                    </div>
                    <div id="collapseEight" class="panel-collapse collapse">
                        <div class="panel-body">
                            <table class="table">
                                <tr><td><a value="8" href="#">Japanese</a></td></tr>
                                <tr><td><a value="8" href="#">Chinese</a> </td></tr>
                                <tr><td><a value="8" href="#">Italian</a></td></tr>
                                <tr><td><a value="8" href="#">Argentinean</a></td></tr>
                                <tr><td><a value="8" href="#">Cantonese</a></td></tr>
                                <tr><td><a value="8" href="#">Mandarin</a></td></tr>
                                <tr><td><a value="8" href="#">Mongolian</a> </td></tr>
                                <tr><td><a value="8" href="#">Arabic</a></td></tr>
                                <tr><td><a value="8" href="#">Greek</a></td></tr>
                                <tr><td><a value="8" href="#">Spanish</a></td></tr>
                                <tr><td><a value="8" href="#">Brasilian</a></td></tr>
                                <tr><td><a value="8" href="#">Swiss</a> </td></tr>
                                <tr><td><a value="8" href="#">Szechuan</a></td></tr>
                                <tr><td><a value="8" href="#">Asian</a></td></tr>
                                <tr><td><a value="8" href="#">International</a></td></tr>
                                <tr><td><a value="8" href="#">Steak Grill</a></td></tr>
                                <tr><td><a value="8" href="#">Vegetarian</a> </td></tr>
                                <tr><td><a value="8" href="#">Natural/Healty/Light</a></td></tr>
                                <tr><td><a value="8" href="#">Traditional mexican</a></td></tr>
                                <tr><td><a value="8" href="#">Tacos</a></td></tr>
                                <tr><td><a value="8" href="#">Mediterranean</a></td></tr>
                                <tr><td><a value="8" href="#">Middle Eastern</a> </td></tr>
                                <tr><td><a value="8" href="#">American/Fast Food</a></td></tr>
                                <tr><td><a value="8" href="#">Gourmet</a></td></tr>
                                <tr><td><a value="8" href="#">Pizza</a></td></tr>
                                <tr><td><a value="8" href="#">Bar/Beer</a></td></tr>
                                <tr><td><a value="8" href="#">Tapas Cafe/Bar</a> </td></tr>
                                <tr><td><a value="8" href="#">French</a></td></tr>
                                <tr><td><a value="8" href="#">Birds</a></td></tr>
                                <tr><td><a value="8" href="#">Seafood</a></td></tr>
                            </table>
                        </div>
                    </div>
                </div>
                 
            </div>
        </div>      
        
        
        
        
        <div id="favorite"> </div>
        <div id="myalert" > </div>
        
        <div class="col-sm-9 col-md-9">
        <div id=container class="visible-xs-*">
            {% if pop_item %}
            <div class="row">
            {% for i in pop_item %}
                    <div class="col-md-4">
                        <div class="thumbnail">
                            
                            <a href="/recomet/view_profile/{{i.id}}/"><img  src="{{i.urlimg}}"   width="280" height="200"> </a>
                            <br>
                                <!--<img src="{{i.urlimg}}" width="242" height="200" class="img-rectangle"><br>-->
                                <div >
                                    <form action="/recomet/rest/profile/" method="GET">
                                        <a href="/recomet/view_profile/{{i.id}}/"><b>{{i.name}}</b></a><br>
                                        <i>{{ i.address }}</i><br>
                                        <a href="/recomet/view_profile/{{i.item.id}}/" class="pull-right"> <b>More</b> </a></li><br>
                                    </form>
                                    
                                </div>
                                
                                <div id="{{i.id}}" class="text-success">   </div>          
                               
                                <div >
                                    
                                   <button type="button" class="btn btn-primary " id="button1" value="{{i.id}}" >Add my Wishlist</button>
                                   &nbsp;&nbsp; <button type="button" class="btn btn-success " id="buttonlike" value="{{i.id}}" >Like &nbsp;<span class='glyphicon glyphicon-heart' aria-hidden='true'></span></button>
                                </div>
                                 <!--div>
                                   <button type="button" class="btn btn-success " id="button1" value="{{i.id}}" >Like</button>
                                </div-->
                        </div>
                    </div>
            
            {% endfor %}
            </div>
            
            {% else %}

            <div class="header">
                <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
                <b> Please use a filter to start. </b>
            </div>
            {% endif %}
        </div>

            
            
            
            
            
        </div>
    </div>
    
</div>

<script>

//para agregar rating desde index....
 //---------------------------------------------cd---------------------------
//FUNCION PARA EL BOTON DE ADDWISHLIST                                    //
//--------------------------------------------------------------------------
$(document).ready(function(){


    //Funcion para filtros de acordion.
    $(".table tr td a").click(function () {
           //document.getElementById('container').innerHTML = "<center><h3><font color='blue'><i>Loading...</font></i></h3></center>";
           var menutxt = $(this).text();
            //document.getElementById('myalert').innerHTML = " "; 
           //alert($(this).text());
           //alert(dropdowntxt); este muetsra eel valor del dropdown
           var menuval= $(this).val(this.getAttribute("value"));
           document.getElementById('tags').innerHTML = "<b class='label label-success'>"+menutxt+"</b>";
            $(this).addClass('active');
           //document.getElementById('features').innerHTML = dropdownval; 
           
           //Para activar el color del boton pulsado por el usuario.
           //$(this).parents(".panel panel-default").find('.panel-collapse collapse').find('.panel-body').find('.table').text($(this).text()).addClass("active");
           //$(this).find('.table tr td a').addClass('active');

           //$(this).parents(".btn-group").find('.selection').text($(this).text());
           //alert(menutxt);
           //alert(menuval);
           //Llenado de caracteristicas BUSCAR ATRIBUTOS DE DROPDOWNVAL EN JSCRIPT
           //features = features + dropdowntxt + ", " + dropdownval + ", ";
           
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/",
               data: JSON.stringify({"menutxt":menutxt, "menuval":menuval}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    // alert("funciono: " + data);
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert(jsonStr);
                    var txt="";
                    
                    if (jsonStr.length==24){
                        //alert('Restaurants no matched with', + menutext+'.');
                        document.getElementById('myalert').innerHTML = "<center><span class='glyphicon glyphicon-remove' aria-hidden='true'></span><a class='danger alert-danger'><b> No restaurant matched with </b> <b><font color='red'>" + menutxt + ".</a></font> </b></center><br>";
                        $("#myalert").fadeIn(3000);
                        $("#myalert").fadeOut(4000);
                    }
                    for (var i=0; i<jsonStr.length; i++){
                            //alert(data.restaurant[i].id);
                            txt += "<div class='col-md-4'><div class='thumbnail'>";  
                            txt += "<a href="+ "/recomet/view_profile/"+data.restaurant[i].id+"/" + ">" + "<img src='"+data.restaurant[i].urlimg+"'  width='280' height='200'></a><br>"+" <div ><b>"+"<a href="+ "/recomet/view_profile/"+data.restaurant[i].id+"/" + ">"+data.restaurant[i].name+"</b></a><br>"+data.restaurant[i].address+"</li><br>"+"<a href="+ "/recomet/view_profile/"+data.restaurant[i].id + "/ class='pull-right'><b>More</b></a>" + "<br>";
                            txt += "</div> <div id='"+data.restaurant[i].id+"' class='text-success'></div> <div ><button type='button' class='btn btn-primary' id='button2' value='"+data.restaurant[i].id+"'>Add my wishlist</button>"+"&nbsp;<button type='button' class='btn btn-success' id='buttonlike2' value='"+data.restaurant[i].id+"'>Like &nbsp;<span class='glyphicon glyphicon-heart' aria-hidden='true'></span> </button>   </div></div></div>";
                            document.getElementById('container').innerHTML = txt;
                    }
                    
                }
       });
   });
//termina acordion....
         
        //Boton like para insertar rating.
        $(".btn-success").click(function (){
        var iditem= $(this).val();
        $(this).prop('disabled', true);
        //alert('boton funciona');
        //$("#msg").children().css({"color": "red", "border": "2px solid red"});
        
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/rating/",
               data: JSON.stringify({"iditem":iditem}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert (jsonStr);
                    //alert (data.restaurant.item);
                    //var wl ="<b class='text-success'><span class='glyphicon glyphicon-ok' aria-hidden='true'></span>Restaurant was added!</b>"; //"<span class='glyphicon glyphicon-ok' aria-hidden='true'></span> <b>Restaurant was added!</b>";
                    //document.getElementById(data.restaurant.item).innerHTML = wl;
            
                }
       });
   });
        
        
        
        
    //$(".btn-success").click(function (){
    $(document).on('click','#buttonlike2', function(){
        var iditem= $(this).val();
        //alert('boton funciona');
        //$("#buttonlike2").disabled();
        $(this).prop('disabled', true);
        //$(".btn-success").prop('disabled', true);
        //$("#msg").children().css({"color": "red", "border": "2px solid red"});
        
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/rating/",
               data: JSON.stringify({"iditem":iditem}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert (jsonStr);
                    //alert (data.restaurant.item);
                   //var wl ="<b class='text-success'><span class='glyphicon glyphicon-ok' aria-hidden='true'></span>Rating was added!</b>"; //"<span class='glyphicon glyphicon-ok' aria-hidden='true'></span> <b>Restaurant was added!</b>";
                    //document.getElementById(data.restaurant.item).innerHTML = wl;
            
                }
       });
   });
    
    
    
    
    ///----------------------------------------------
         
    $(".btn-primary").click(function (){
        var iditem= $(this).val();
        $(this).prop('disabled', true);
        //$("#msg").children().css({"color": "red", "border": "2px solid red"});
        
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/addwish/",
               data: JSON.stringify({"iditem":iditem}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert (jsonStr);
                    //alert (data.restaurant.item);
                    var wl ="<b class='text-success'><span class='glyphicon glyphicon-ok' aria-hidden='true'></span>Added!</b>"; //"<span class='glyphicon glyphicon-ok' aria-hidden='true'></span> <b>Restaurant was added!</b>";
                    document.getElementById(data.restaurant.item).innerHTML = wl;
                    $(data.restaurant.item).fadeOut(3000);
            
                }
       });
   });
    
    //Para el boton de wishkist despues de refresh con json.
    $(document).on('click','#button2', function(){
        //$(".btn-success").click(function (){
        var iditem= $(this).val();
        //var msg = "Thanks for add!";
        $(this).prop('disabled', true);
        $("#msg").fadeOut();
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/addwish/",
               data: JSON.stringify({"iditem":iditem}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert (jsonStr);
                    //alert (data.restaurant.item);
                    var wl = "<b class='text-info'><span class='glyphicon glyphicon-ok' aria-hidden='true'></span>Added!</b>"; //"<span class='glyphicon glyphicon-ok' aria-hidden='true'></span> <b>Restaurant was added!</b>";
                    document.getElementById(data.restaurant.item).innerHTML = wl;
                    //var msg = "<span class='glyphicon glyphicon-ok' aria-hidden='true'></span> <b>Thanks for your vote!</b>";
                    //document.getElementById('message').innerHTML = wl;
                }
       });
   });
    
    //$ function(){
  /*  $(document).on('click','#btnmenu1', function(){
        $('#btnmenu1 option[value=""]').attr('selected', 'selected');
    });*/
        /*$('#btnmenu2').change(function(){
            $('#btnmenu2 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu3').change(function(){
            $('#btnmenu3 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu4').change(function(){
            $('#btnmenu4 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu5').change(function(){
            $('#btnmenu5 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu6').change(function(){
            $('#btnmenu6 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu7').change(function(){
            $('#btnmenu7 option[value=""]').attr('selected', 'selected');
        });
        $('#btnmenu8').change(function(){
            $('#btnmenu8 option[value=""]').attr('selected', 'selected');
        });    
    });
    */
//MENU DE FILTROS, MANEJA TODOS LOS BOTONES DE FILTRADO.
    $(".dropdown-menu li a").click(function () {
           //document.getElementById('container').innerHTML = "<center><h3><font color='blue'><i>Loading...</font></i></h3></center>";
           var dropdowntxt = $(this).text();
            document.getElementById('myalert').innerHTML = " "; 
           //alert($(this).text());
           //alert(dropdowntxt); este muetsra eel valor del dropdown
           var dropdownval= $(this).val(this.getAttribute("value"));
           //document.getElementById('features').innerHTML = dropdownval; 
           
           //Para activar el color del boton pulsado por el usuario.
           $(this).parents(".btn-group").find('.btn').text($(this).text()); //.addClass("active");           
            //$('#btnmenu1').val('');
           //$(this).parents(".btn-group").find('.selection').text($(this).text());
           
           //Llenado de caracteristicas BUSCAR ATRIBUTOS DE DROPDOWNVAL EN JSCRIPT
           //features = features + dropdowntxt + ", " + dropdownval + ", ";
           
                                $.ajaxSetup({
                                    beforeSend: function(xhr, settings) {
                                    function getCookie(name) {
                                           var cookieValue = null;
                                           if (document.cookie && document.cookie != '') {
                                               var cookies = document.cookie.split(';');
                                               for (var i = 0; i < cookies.length; i++) {
                                                   var cookie = jQuery.trim(cookies[i]);
                                                   // Does this cookie string begin with the name we want?
                                                   if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                                       cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                       break;
                                                   }
                                               }
                                           }
                                           return cookieValue; 
                                    }
                                       if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                                           // Only send the token to relative URLs i.e. locally.
                                           xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                                        }
                                    }
                                });
       $.ajax({
               type: "POST",
               url: "/recomet/",
               data: JSON.stringify({"dropdowntxt":dropdowntxt, "dropdownval":dropdownval}),
               dataType: "json",
               contentType:"application/json",
               success: function(data) {
                    // alert("funciono: " + data);
                    var jsonStr = JSON.stringify(data, null, 4);
                    //alert(jsonStr);
                    //alert(jsonStr.length);
                        var txt="";
                        if (jsonStr.length==24){
                            //alert('RESTAURANTS WERE NOT FOUND.');
                            document.getElementById('myalert').innerHTML = "<br><center><span class='glyphicon glyphicon-remove' aria-hidden='true'></span><b> No restaurant matched with </b> <b><font color='red'> " + dropdowntxt + ".</font> </b></center>"; 
                            //$("#myAlert").fadeOut();
                            //document.getElementById('container').innerHTML = "<center><b>No Results</b></center>";
                        }
                        
                        for (var i=0; i<jsonStr.length; i++){
                                //alert(data.restaurant[i].id);
                                txt += "<div class='col-md-4'><div class='thumbnail'>";  
                                txt += "<a href="+ "/recomet/view_profile/"+data.restaurant[i].id+"/" + ">" + "<img src='"+data.restaurant[i].urlimg+"'  width='280' height='200'></a><br>"+" <div ><b>"+"<a href="+ "/recomet/view_profile/"+data.restaurant[i].id+"/" + ">"+data.restaurant[i].name+"</b></a><br>"+data.restaurant[i].address+"</li><br>"+"<a href="+ "/recomet/view_profile/"+data.restaurant[i].id + "/ class='pull-right'><b>More</b></a>" + "<br>";
                                txt += "</div> <div id='"+data.restaurant[i].id+"' class='text-success'></div> <div ><button type='button' class='btn btn-primary' id='button2' value='"+data.restaurant[i].id+"'>Add my wishlist</button>"+"&nbsp;<button type='button' class='btn btn-success' id='buttonlike2' value='"+data.restaurant[i].id+"'>Like &nbsp;<span class='glyphicon glyphicon-heart' aria-hidden='true'></span> </button>   </div></div></div>";
                                //<button type="button" class="btn btn-default" id="wishlist" value="{{i.id}}">Add my Wishlist</button>
                                //"<input class='btn btn-default'  role='button' type='submit' value='"+data.restaurant[i].id+"'>"+"</div></div>";
                                        
                                
                                //txt += "<form action='/recomet/addwishlist/"+data.restaurant[i].id+"/' method='GET'>"+"<input class='btn btn-default add_wish' role='button' type='submit' value='Add my Wishlist!!'>"+"</form>"+ "</div></div>";
                                //document.write(data.restaurant[i].name+"<br>");
                                document.getElementById('container').innerHTML = txt;
                                
                                /*if (data.restaurant[i].price_value=='1'){
                                    document.getElementById('favorite').innerHTML = "<p><br><b class='text-info'>Your favorite price is "+ data.restaurant[i].favorite + "</b></p>";
                                    $("#favorite").fadeOut(10000);
                                }*/
                        }
                     
                }
       });
   });

});//final de document ready agregado

   
 </script>
{% endblock content %}













<hr>
<h2>Distance Matrix service</h3>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>   
<script>
var map;
var geocoder;
var bounds = new google.maps.LatLngBounds();
var markersArray = [];

var origin1 = new google.maps.LatLng(55.930, -3.118);
var origin2 = 'Greenwich, England';
var destinationA = 'Stockholm, Sweden';
var destinationB = new google.maps.LatLng(50.087, 14.421);

var destinationIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000';
var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';


function initialize() {
  var opts = {
    center: new google.maps.LatLng(55.53, 9.4),
    zoom: 10
  };
  map = new google.maps.Map(document.getElementById('map-canvas'), opts);
  geocoder = new google.maps.Geocoder();
}

function calculateDistances() {
  var service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix(
    {
      origins: [origin1, origin2],
      destinations: [destinationA, destinationB],
      travelMode: google.maps.TravelMode.DRIVING,
      unitSystem: google.maps.UnitSystem.METRIC,
      avoidHighways: false,
      avoidTolls: false
    }, callback);
}

function callback(response, status) {
  if (status != google.maps.DistanceMatrixStatus.OK) {
    alert('Error was: ' + status);
  } else {
    var origins = response.originAddresses;
    var destinations = response.destinationAddresses;
    var outputDiv = document.getElementById('outputDiv');
    outputDiv.innerHTML = '';
    deleteOverlays();

    for (var i = 0; i < origins.length; i++) {
      var results = response.rows[i].elements;
      addMarker(origins[i], false);
      for (var j = 0; j < results.length; j++) {
        addMarker(destinations[j], true);
        outputDiv.innerHTML += origins[i] + ' to ' + destinations[j]
            + ': ' + results[j].distance.text + ' in '
            + results[j].duration.text + '<br>';
      }
    }
  }
}

function addMarker(location, isDestination) {
  var icon;
  if (isDestination) {
    icon = destinationIcon;
  } else {
    icon = originIcon;
  }
  geocoder.geocode({'address': location}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      bounds.extend(results[0].geometry.location);
      map.fitBounds(bounds);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location,
        icon: icon
      });
      markersArray.push(marker);
    } else {
      alert('Geocode was not successful for the following reason: '
        + status);
    }
  });
}

function deleteOverlays() {
  for (var i = 0; i < markersArray.length; i++) {
    markersArray[i].setMap(null);
  }
  markersArray = [];
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>




    <div id="content-pane">
      <div id="inputs">
        <pre>
        var origin1 = new google.maps.LatLng(55.930, -3.118);
        var origin2 = 'Greenwich, England';
        var destinationA = 'Stockholm, Sweden';
        var destinationB = new google.maps.LatLng(50.087, 14.421);
        </pre>
        <p><button type="button" onclick="calculateDistances();">Calculate
          distances</button></p>
      </div>
      <div id="outputDiv"></div>
    </div>
    <div id="map-canvas"></div>






















        <!-- /.row -->
        
        <!-- SECCION DEL CAROUSEL SE ELIMINA TEMPORALMENTE -->
        <!--
            <div class="col-md-7">
            <br>
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
  
              <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
                <li data-target="#myCarousel" data-slide-to="4"></li>
                <li data-target="#myCarousel" data-slide-to="5"></li>
                <li data-target="#myCarousel" data-slide-to="6"></li>
                <li data-target="#myCarousel" data-slide-to="7"></li>
                <li data-target="#myCarousel" data-slide-to="8"></li>
                <li data-target="#myCarousel" data-slide-to="9"></li>
              </ol>
          
              <Wrapper for slides>
              <div class="carousel-inner" role="listbox">
                <div class="item active">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xtp1/v/t1.0-9/11110286_955593217805712_7933992014073770406_n.jpg?oh=e7d15fc87821e5dea63b18fc0e0f9080&oe=55AC48BD" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xpa1/v/t1.0-9/10478602_955593187805715_7151742288976944917_n.jpg?oh=e78e7e4b4bd3314623e9210e1e282305&oe=55B301FB" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xfa1/v/t1.0-9/11130254_955593201139047_1626514711058867797_n.jpg?oh=7c5841b96d894444ac085eefb4f8cd3b&oe=55A420A3" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xtf1/v/t1.0-9/11060844_955593244472376_3453377553624817162_n.jpg?oh=f07bbe5319602cdeb9077b542a1e8eb7&oe=5598FD81" alt="">
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xap1/v/t1.0-9/11084305_955593307805703_1197767605132117295_n.jpg?oh=22a022bed55f74644b27ab15fb076652&oe=55E5A42A" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/11148463_955593277805706_4603145469885546515_n.jpg?oh=cf8f51ccfa66001ea6a80e7265b6db0d&oe=55A27D8C" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/11149353_955593397805694_3625435278082316810_n.jpg?oh=8de019f6367744731bfcf604c23ff3c9&oe=55B5EFAC" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xfp1/v/t1.0-9/11102846_955593327805701_5908488802429930438_n.jpg?oh=18669a6f2b1a37083d121c4b35e8a8b5&oe=559B77F5" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xap1/v/t1.0-9/11136698_955593347805699_8501660974645908894_n.jpg?oh=f4f93e87d5893c1c98e4d8a7da2210c9&oe=55AA57FD" alt="" >
                </div>
                <div class="item">
                  <img src="https://scontent-dfw.xx.fbcdn.net/hphotos-xfp1/v/t1.0-9/11095315_955593427805691_7918340469692325239_n.jpg?oh=e383a6b94f3921eb36cca8a28c6d30bb&oe=55AC7CE5" alt="">
                </div>
              </div>
          
            
              <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>-->

            
            <!--ESPACIO PARA RECOMENDACIONES INICIALES-->
            <!--div class="col-md-4">
                <h3>Project </h3>
                <p>Tijuana's Recommendations is a research project of Tijuana Institute of Technology in experimental test phase.
                
                </p>
                
                <h3>Tijuana Weather</h3>
            
            <table>
                <tr>
                    <td> Temperature: {{ temperature.temp }}C.</td> 
                </tr>
                <tr>
                    <td> Rain: {{ rain }}% </td> 
                </tr>
                <tr>
                    <td> Clouds: {{ clouds }}%</td> 
                </tr>
                <tr>
                    <td> Humidity: {{ humidity }}%</td> 
                </tr>
                <tr>
                    <td> Wind speed: {{ wind.speed }} km/h.</td> 
                </tr>
            </table>
            <br><br>
            </div>
        </div-->
        <!-- /.row -->

        
        <!--ELIMINAMOS LA SECCION DE RESTAURANTES POPULARES DEL INDEX
        {% if u != 'Guest'%}
        <div class="row">
            <div class="col-lg-12">
                <h4 class="page-header">Restaurantes</h4>
            </div>
            {% if rests%}
                {% for i in rests%}
                <div class="col-sm-3 col-xs-6">
                    
                    <a href="/recomet/view_profile/{{i.id}}/"><img src="{{i.urlimg}}" width=150 height=100 class="img-rounded"><br></a>
                    <b> <a href="/recomet/view_profile/{{i.id}}/">{{ i.name }}</a></b><br>
                    <small> {{ i.address }}</small><br>
                   
                </div>
                {% endfor %}
            {% else %}
            <div class="col-sm-3 col-xs-6">
                <b>No restaurants found.</b>
            </div>
            {% endif %}
        </div>
        {% else %}
            <div class="row">
                <div class="col-lg-12">
                    <h4 class="page-header">Restaurantes de tijuana</h4>
                </div>
                {% if rests%}
                    {% for i in rests%}
                    <div class="col-sm-3 col-xs-6">
                        
                        <a href="/recomet/view_profile/{{i.id}}/"><img src="{{i.urlimg}}" width=150 height=100 class="img-rounded" ><br></a>
                        <b> <a href="/recomet/view_profile/{{i.id}}/">{{ i.name }}</a></b><br>
                        <small> {{ i.address }}</small><br>
                        
                    </div>
                    {% endfor %}
                {% else %}
                <div class="col-sm-3 col-xs-6">
                    <b>No restaurants found.</b>
                </div>
                {% endif %}
            </div>
        {% endif %}
        TERMINA EL ESPACIO DE RESTAURANTES POPULARES-->
        
        <!--ELIMINAMOS ESPACIO  DE REVIEWS POR DIA POPULARES>
        <div class="row">
            <h4 class="page-header">Reviews</h4>
                {% for r in qreviews %}
                    <div class="well">
                    Title: <b>{{ r.title }}</b><br>
                    <small>Restaurant:<b> <a href="/recomet/view_profile/{{i.id}}/">{{ r.restaurant }}</a></b></small><br>
                    <i>{{ r.review }}</i><br>
                    <small><i>Published by: <b>{{ r.user }}</b> on {{r.review_time}}</i></small><br>
                    </div>
                 {% endfor %}
        </div-->




 <hr>
    
 <div id="container1">
        {% if query %}
        <div class="row">
        {% for i in query %}
                <div class="col-xs-6 col-md-3">
                    <div class="thumbnail">
                        <a href="{{i.urlimg}}"><img width="240" height="200" src="{{i.urlimg}}" /> </a>
                            <!--<img src="{{i.urlimg}}" width="242" height="200" class="img-rectangle"><br>-->
                            <div>
                                <form action="/recomet/rest/profile/" method="GET">
                                    <a href="/recomet/view_profile/{{i.id}}/"><b>{{i.name}}</b></a><br>
                                    <i>{{ i.address }}</i><br>
                                    <a href="/recomet/view_profile/{{i.item.id}}/"> <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></a></li>
                                </form>
                                <form action="/recomet/addwishlist/{{ i.item.id }}/{{ id }}/" method="GET">
                                    <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>                                
                                    <input class="btn btn-primary" role="button" type=submit value="+Wishlist">
                                </form>
                            </div>
                    </div>
               </div>
        {% endfor %}
        </div> 
         
        {% else %}
                <div class="row">
                    <p><B> No restaurants found.</B></p>
                </div>
        {% endif %} 
    </div>
                    
                    
                    
                    
                    
                    <script>
                    //txt = "<li>"+data.restaurant[i].name+"</li>"+"<li>"+data.restaurant[i].address+"</li>"+"<br><img src="+data.restaurant[i].urlimg+" width=240 height=200>"+"<a href="+ "/recomet/view_profile/"+data.restaurant[i].id+"/" + ">Profile</a>" +"<br><br>";
                                             
                    //var template = document.getElementById('container').innerHTML;
                    //var output = Mustache.render(template, jsonStr);
                    //document.getElementById('container').innerHTML = jsonStr;
                    //document.getElementById('container').innerHTML = jsonStr;
                    //alert('Autor 1: '+ miLibro.autores[0]);
                     
                     
                     
                    //$(#container).html(txt);                    
                    
                        //document.write('<h1>'+restaurant[i].name+'</h1>');
                        //document.write('<li>'+restaurant[i].address+'</>');
                        //console.log("Yum!");
                    
                /*    $.each(jsonStr.restaurant.name, function(i,res){
                        txt += "<div>";
                        txt += "<img src='"+ res.urlimg +"' />";
                        txt += "</div>"; 
                    });
                    $(#container).html(txt)*/
                    </script>
                     
                     
                     
    <div class="col-xs-6 col-md-3">
        <div class="thumbnail">
                <a href="{{i.urlimg}}"><img width="240" height="200" src="{{i.urlimg}}" /> </a>
                            <!--<img src="{{i.urlimg}}" width="242" height="200" class="img-rectangle"><br>-->
                <div>
                        <form action="/recomet/rest/profile/" method="GET">
                            <a href="/recomet/view_profile/{{i.id}}/"><b>{{i.name}}</b></a><br>
                            <i>{{ i.address }}</i><br>
                            <a href="/recomet/view_profile/{{i.item.id}}/"> <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></a></li>
                        </form>
                        <form action="/recomet/addwishlist/{{ i.item.id }}/{{ id }}/" method="GET">
                            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>                                
                            <input class="btn btn-primary" role="button" type=submit value="+Wishlist">
                        </form>
                </div>
        </div>
    </div>
    
    
    
    
<script>
        
                     //console.log('message :'+data.message);
                    //var jsonStr = JSON.stringify(data, null, 4);
                    //alert(jsonStr);
                    //document.getElementById('container').innerHTML = jsonStr;
                   // $("#container").html(opt);
   
                     //   document.write(jsonObj.pop() + jsonObj.name + "<br/>");
                    //document.getElementById('container').innerHTML = opt;
                    //$.ajax({
               //type: "POST",
               //url: "/drag/"+msg+"/",
               //url: "/recomet/",
               //data: JSON.stringify({"dropdowntxt":dropdowntxt, "dropdownval":dropdownval}),
               //dataType: "json",
               //contentType:"application/json",
               //success: function(data) {
                //    var jsonStr = JSON.stringify(data, null, 4);
                 //   document.getElementById('container').innerHTML = jsonStr;
                    
                   // alert("funciono: " + jsonStr);
                //}

           
       //});

   //});
    
</script>


<!--script>
        var jsonStr = JSON.stringify(data, null, 4);
        alert('json values restaurant');
</script>
<script>
    document.write(data.restaurant.name);
</script>
